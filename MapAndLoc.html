<!DOCTYPE html>
<html>
  <head>
    <title>Place Autocomplete</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <script src="//unpkg.com/brain.js"></script>
    <!-- <script src="../Crime-Rate-Prediction--K-means-Algorithm/brain.js"></script> -->
    <!-- <script type="module" src="brainimp_2.js"></script> -->
    <!-- <script type="text/javascript" type="module" src="brainimp_2.js"></script> -->
    <!-- <script type="text/javascript" src="static/brainimp_2.js"></script> -->
    <script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css" >
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <meta charset="utf-8">
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
        width: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        background-color : white;
      }
      .controls {
        margin-top: 10px;
        border: 1px solid transparent;
        border-radius: 2px 0 0 2px;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        height: 32px;
        outline: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
      }

      #origin-input,
      #destination-input {
        background-color: #fff;
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
        margin-left: 12px;
        padding: 0 11px 0 13px;
        text-overflow: ellipsis;
        width: 200px;
      }

      #origin-input:focus,
      #destination-input:focus {
        border-color: #4d90fe;
      }

      #mode-selector {
        color: #fff;
        background-color: #4d90fe;
        margin-left: 12px;
        padding: 5px 11px 0px 11px;
      }

      #mode-selector label {
        font-family: Roboto;
        font-size: 13px;
        font-weight: 300;
      }
      /* List with bullets */
.my {
    list-style: none;
    /* width: 40px; */
}
#toggle-heatmap{
  left: 800px;
  /* right:100px; */
}
.my li {
    display: flex;
    align-items: center;
}

.recommend{
  width: 100px;
  height: 50px;
  background-color: red;
  font-weight: bold;
  position: relative;
  animation: mymove 5s infinite;
  animation-timing-function: ease-in-out;
}
@keyframes mymove {
  from {left: 0px;}
  to {left: 300px;}
}
.my li::before {
    content: '';

    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #5784d7;
    border: 2px solid #8fb3f5;
    display: block;
    margin-right: 1rem;
}
      li{
      	font-family: georgia;
      }

    </style>
  </head>
  <body>
  	<div class= "ui main container segment">
  		<h1 style="font-size: 75px; font-family: georgia">Crime Hotspot Detection using Geospatial Methods</h1>
  		<h2 style="text-align: right; font-family: georgia">Because you must look before you leave!</h2>
  	</div>
    <input id="origin-input" class="controls" type="text"
        placeholder="Enter an origin location">

    <input id="destination-input" class="controls" type="text"
        placeholder="Enter a destination location">

    <div id="mode-selector" class="controls">
      <input type="radio" name="type" id="changemode-walking" checked="checked">
      <label for="changemode-walking">Walking</label>

      <input type="radio" name="type" id="changemode-transit">
      <label for="changemode-transit">Transit</label>

      <input type="radio" name="type" id="changemode-driving">
      <label for="changemode-driving">Driving</label>
      <input type="radio" name="type" id="toggle-heatmap">
      <label>Toggle Heatmap</label>
      <!-- <div id="floating-panel"> -->
        <!-- <button id="toggle-heatmap">Toggle Heatmap</button> -->
      </div>
    <!-- </div> -->
    <div id="map" class="ui container "></div>
    <p id="myres"></p>
    <p id="details"></p>
   <!-- <div class = "ui container style="color : red;" > -->
   	<h5 id="banner" style="color:red;text-align: center;"></h5>
    <p id="brainTag"></p>
   </div>
   <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAHeTD7G2lgpF1GX1DhVbNj15IEkBLR6ME&libraries=places,visualization"
      
   ></script>
   <!-- <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAHeTD7G2lgpF1GX1DhVbNj15IEkBLR6ME&callback=initMap&libraries=visualization&v=weekly"
      defer></script>  -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
      
      <script >
        
        // const brain = require(['brain.js']);
    var  data=  [
      {'lati': 77.249200000000002, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.536300000000001}, {'lati': 77.085999999999999, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.6127}, {'lati': 77.2042, 'type': 'Feature', 'properties': {'mag': 4}, 'longi': 28.529900000000001}, {'lati': 77.236099999999993, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.643599999999999}, {'lati': 77.193700000000007, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.7026}, {'lati': 77.293700000000001, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.653400000000001}, {'lati': 77.226200000000006, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.666399999999999}, {'lati': 77.265299999999996, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.5307}, {'lati': 77.066199999999995, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.609100000000002}, {'lati': 77.267600000000002, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.5623}, {'lati': 77.306200000000004, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.523}, {'lati': 77.224199999999996, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.7072}, {'lati': 77.003600000000006, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.7258}, {'lati': 77.1738, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.66}, {'lati': 77.086399999999998, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.5914}, {'lati': 77.127600000000001, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.7179}, {'lati': 77.179000000000002, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.570499999999999}, {'lati': 77.115899999999996, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.702400000000001}, {'lati': 77.132800000000003, 'type': 'Feature', 'properties': {'mag': 4}, 'longi': 28.674399999999999}, {'lati': 77.015600000000006, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.6037}, {'lati': 77.197400000000002, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.736599999999999}, {'lati': 77.233599999999996, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.652799999999999}, {'lati': 77.175299999999993, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.709800000000001}, {'lati': 77.196100000000001, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.603400000000001}, {'lati': 77.302599999999998, 'type': 'Feature', 'properties': {'mag': 3}, 'longi': 28.6204}, {'lati': 77.088800000000006, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.679600000000001}, {'lati': 77.1511, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.465499999999999}, {'lati': 77.217500000000001, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.649799999999999}, {'lati': 77.119900000000001, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.639700000000001}, {'lati': 77.174899999999994, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.733599999999999}, {'lati': 77.226200000000006, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.643000000000001}, {'lati': 77.224999999999994, 'type': 'Feature', 'properties': {'mag': 4}, 'longi': 28.6309}, {'lati': 77.204899999999995, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.569299999999998}, {'lati': 77.208600000000004, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.700199999999999}, {'lati': 77.292199999999994, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.668800000000001}, {'lati': 77.257400000000004, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.533200000000001}, {'lati': 77.256399999999999, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.5473}, {'lati': 77.180499999999995, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.6478}, {'lati': 77.240499999999997, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.587399999999999}, {'lati': 77.144999999999996, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.630800000000001}, {'lati': 77.274600000000007, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.526800000000001}, {'lati': 77.142200000000003, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.725200000000001}, {'lati': 76.915599999999998, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.595700000000001}, {'lati': 77.120800000000003, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.6266}, {'lati': 77.0608, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.709599999999998}, {'lati': 77.101900000000001, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.710000000000001}, {'lati': 77.240899999999996, 'type': 'Feature', 'properties': {'mag': 4}, 'longi': 28.559100000000001}, {'lati': 77.139099999999999, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.798999999999999}, {'lati': 77.164199999999994, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.7258}, {'lati': 77.1524, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.5349}, {'lati': 77.165700000000001, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.742899999999999}, {'lati': 77.042500000000004, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.796500000000002}, {'lati': 77.0518, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.724499999999999}, {'lati': 77.137799999999999, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.633600000000001}, {'lati': 77.214299999999994, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.498899999999999}, {'lati': 77.1828, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.635000000000002}, {'lati': 77.1571, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.716799999999999}, {'lati': 77.159800000000004, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.684200000000001}, {'lati': 77.119299999999996, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.697800000000001}, {'lati': 77.208500000000001, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.665400000000002}, {'lati': 77.214299999999994, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.629999999999999}, {'lati': 77.244200000000006, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.592400000000001}, {'lati': 77.240600000000001, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.6419}, {'lati': 77.0916, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.6966}, {'lati': 77.306600000000003, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.666799999999999}, {'lati': 77.218800000000002, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.6556}, {'lati': 77.078599999999994, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.7026}, {'lati': 77.276399999999995, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.6554}, {'lati': 77.221500000000006, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.688500000000001}, {'lati': 77.174300000000002, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.692399999999999}, {'lati': 77.101399999999998, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.638999999999999}, {'lati': 77.082899999999995, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.588100000000001}, {'lati': 77.146600000000007, 'type': 'Feature', 'properties': {'mag': 4}, 'longi': 28.6601}, {'lati': 77.099500000000006, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.609400000000001}, {'lati': 77.209299999999999, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.645800000000001}, {'lati': 77.211200000000005, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.654}, {'lati': 77.199100000000001, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.5745}, {'lati': 76.982699999999994, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.6098}, {'lati': 77.087199999999996, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.529599999999999}, {'lati': 77.317099999999996, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.613600000000002}, {'lati': 77.303600000000003, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.4938}, {'lati': 77.144099999999995, 'type': 'Feature', 'properties': {'mag': 4}, 'longi': 28.689}, {'lati': 77.207700000000003, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.6692}, {'lati': 77.206500000000005, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.692499999999999}, {'lati': 77.203199999999995, 'type': 'Feature', 'properties': {'mag': 3}, 'longi': 28.6386}, {'lati': 77.211200000000005, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.598299999999998}, {'lati': 77.240499999999997, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.5684}, {'lati': 77.280699999999996, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.667000000000002}, {'lati': 77.233699999999999, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.604199999999999}, {'lati': 77.313100000000006, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.655999999999999}, {'lati': 77.156199999999998, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.758400000000002}, {'lati': 77.232799999999997, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.554099999999998}, {'lati': 77.068299999999994, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.629999999999999}, {'lati': 77.064899999999994, 'type': 'Feature', 'properties': {'mag': 4}, 'longi': 28.625}, {'lati': 77.233400000000003, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.564699999999998}, {'lati': 77.292400000000001, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.562100000000001}, {'lati': 77.231499999999997, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.662500000000001}, {'lati': 77.290999999999997, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.5016}, {'lati': 77.281999999999996, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.540500000000002}, {'lati': 77.066999999999993, 'type': 'Feature', 'properties': {'mag': 3}, 'longi': 28.681999999999999}, {'lati': 77.198599999999999, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.558499999999999}, {'lati': 77.225499999999997, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.6434}, {'lati': 77.066699999999997, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.578399999999998}, {'lati': 77.101200000000006, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.671099999999999}, {'lati': 77.067400000000006, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.6205}, {'lati': 77.235399999999998, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.618200000000002}, {'lati': 77.119600000000005, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.651499999999999}, {'lati': 77.242999999999995, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.509599999999999}, {'lati': 77.303700000000006, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.607299999999999}, {'lati': 77.078900000000004, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.747699999999998}, {'lati': 77.267300000000006, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.659600000000001}, {'lati': 77.058499999999995, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.5641}, {'lati': 77.158699999999996, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.647500000000001}, {'lati': 77.036000000000001, 'type': 'Feature', 'properties': {'mag': 3}, 'longi': 28.6538}, {'lati': 77.227199999999996, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.5288}, {'lati': 77.270300000000006, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.637799999999999}, {'lati': 77.295299999999997, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.638500000000001}, {'lati': 77.135099999999994, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.640499999999999}, {'lati': 77.208500000000001, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.549399999999999}, {'lati': 77.022800000000004, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.8066}, {'lati': 77.120999999999995, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.730399999999999}, {'lati': 77.247200000000007, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.627400000000002}, {'lati': 77.225099999999998, 'type': 'Feature', 'properties': {'mag': 3}, 'longi': 28.575900000000001}, {'lati': 77.124399999999994, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.598700000000001}, {'lati': 77.193299999999994, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.6526}, {'lati': 77.113299999999995, 'type': 'Feature', 'properties': {'mag': 3}, 'longi': 28.657599999999999}, {'lati': 77.283900000000003, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.643599999999999}, {'lati': 77.158199999999994, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.6524}, {'lati': 77.169300000000007, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.558}, {'lati': 77.193200000000004, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.6526}, {'lati': 77.260199999999998, 'type': 'Feature', 'properties': {'mag': 4}, 'longi': 28.578399999999998}, {'lati': 77.088499999999996, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.853200000000001}, {'lati': 77.311800000000005, 'type': 'Feature', 'properties': {'mag': 4}, 'longi': 28.598199999999999}, {'lati': 77.213700000000003, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.624700000000001}, {'lati': 77.071700000000007, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.664999999999999}, {'lati': 77.306100000000001, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.625399999999999}, {'lati': 77.1785, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.680599999999998}, {'lati': 77.306100000000001, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.625399999999999}, {'lati': 76.966800000000006, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.628699999999998}, {'lati': 76.994699999999995, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.5869}, {'lati': 77.180199999999999, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.5215}, {'lati': 77.146000000000001, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.700399999999998}, {'lati': 77.081900000000005, 'type': 'Feature', 'properties': {'mag': 3}, 'longi': 28.628599999999999}, {'lati': 77.183700000000002, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.668399999999998}, {'lati': 77.192599999999999, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.670000000000002}, {'lati': 77.202600000000004, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.684999999999999}, {'lati': 77.152299999999997, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.5349}, {'lati': 77.118200000000002, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.7089}, {'lati': 77.332700000000003, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.6249}, {'lati': 77.316500000000005, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.678100000000001}, {'lati': 77.268600000000006, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.674299999999999}, {'lati': 77.298599999999993, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.6828}, {'lati': 77.285200000000003, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.674199999999999}, {'lati': 77.256100000000004, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.711099999999998}, {'lati': 77.291700000000006, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.696100000000001}, {'lati': 77.3185, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.706}, {'lati': 76.960800000000006, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.670400000000001}, {'lati': 77.264399999999995, 'type': 'Feature', 'properties': {'mag': 3}, 'longi': 28.7013}, {'lati': 77.272999999999996, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.679099999999998}, {'lati': 77.274799999999999, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.673400000000001}, {'lati': 77.308199999999999, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.698499999999999}, {'lati': 77.316000000000003, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.684999999999999}, {'lati': 77.262100000000004, 'type': 'Feature', 'properties': {'mag': 0}, 'longi': 28.672000000000001}, {'lati': 77.256100000000004, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.711300000000001}, {'lati': 77.274500000000003, 'type': 'Feature', 'properties': {'mag': 2}, 'longi': 28.732800000000001}, {'lati': 77.280799999999999, 'type': 'Feature', 'properties': {'mag': 1}, 'longi': 28.702200000000001}
    ];
    var logit = []
    if (data == "longi"){
      logit.push(data)
      console.log(logit)
    }
    
    var map;
    var directionsDisplay;
    var directionsService;
    
    function initMap(location) {
      
      directionsService = new google.maps.DirectionsService();
            directionsDisplay = new google.maps.DirectionsRenderer();
          var loc = new google.maps.LatLng(location.coords.latitude,location.coords.longitude);
          map = new google.maps.Map(document.getElementById('map'), {
            mapTypeControl: false,
            zoom: 7,
            center: loc,
            mapTypeId: 'terrain'
          });
          // heatmap = new google.maps.visualization.HeatmapLayer({
            //   data: getPoints(),
          //   map: map,
          // });
          // document.getElementById("toggle-heatmap").addEventListener("click", toggleHeatmap);

        var marker = new google.maps.Marker({
          position: loc,
          map: map
        });

        const trafficLayer = new google.maps.TrafficLayer();
        trafficLayer.setMap(map);
        // directionsDisplay.setMap(map);
         directionsDisplay.setMap(map);
         var script = document.createElement('script');
        //script.src = 'helper.js';

         document.getElementsByTagName('head')[0].appendChild(script);

          map.data.setStyle(function(feature) {
          var magnitude = feature.getProperty('mag');
          console.log(typeof(magnitude));
          return {
            icon: getCircle(magnitude)
          };
        });
        new AutocompleteDirectionsHandler(map);
      }
      function toggleHeatmap(){
  heatmap.setMap(heatmap.getMap() ? null : map);
}
      function getCircle(magnitude) {
        return {
          path: google.maps.SymbolPath.CIRCLE,
          fillColor: 'red',
          fillOpacity: .2,
          scale: Math.pow(2, magnitude) / 2,
          strokeColor: 'white',
          strokeWeight: .5
        };
      }

       /**
        * @constructor
       */
      function AutocompleteDirectionsHandler(map) {
        this.map = map;
        this.originPlaceId = null;
        this.destinationPlaceId = null;
        this.travelMode = 'WALKING';
        var originInput = document.getElementById('origin-input');
        var destinationInput = document.getElementById('destination-input');
        var modeSelector = document.getElementById('mode-selector');
        this.directionsService = new google.maps.DirectionsService;
        this.directionsDisplay = new google.maps.DirectionsRenderer;
        this.directionsDisplay.setMap(map);

        var originAutocomplete = new google.maps.places.Autocomplete(
            originInput, {place_id: true});
        var destinationAutocomplete = new google.maps.places.Autocomplete(
            destinationInput, {place_id: true});
        this.setupClickListener('changemode-driving', 'DRIVING');
        this.setupClickListener('changemode-walking', 'WALKING');
        this.setupClickListener('changemode-transit', 'TRANSIT');
        //this.setupClickListener('changemode-driving', 'DRIVING');

        this.setupPlaceChangedListener(originAutocomplete, 'ORIG');
        this.setupPlaceChangedListener(destinationAutocomplete, 'DEST');

        this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(originInput);
        this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(destinationInput);
        this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(modeSelector);
      }

      // Sets a listener on a radio button to change the filter type on Places
      // Autocomplete.
      AutocompleteDirectionsHandler.prototype.setupClickListener = function(id, mode) {
        var radioButton = document.getElementById(id);
        var me = this;
        radioButton.addEventListener('click', function() {
          me.travelMode = mode;
          me.route();
        });
      };

      AutocompleteDirectionsHandler.prototype.setupPlaceChangedListener = function(autocomplete, mode) {
        var me = this;
        autocomplete.bindTo('bounds', this.map);
        autocomplete.addListener('place_changed', function() {
          var place = autocomplete.getPlace();
          if (!place.place_id) {
            window.alert("Please select an option from the dropdown list.");
            return;
          }
          if (mode === 'ORIG') {
            me.originPlaceId = place.place_id;
          } else {
            me.destinationPlaceId = place.place_id;
          }
          me.route();
        });

      };

      AutocompleteDirectionsHandler.prototype.route = function() {
        if (!this.originPlaceId || !this.destinationPlaceId) {
          return;
        }
        var me = this;

        this.directionsService.route({
          origin: {'placeId': this.originPlaceId},
          destination: {'placeId': this.destinationPlaceId},
          travelMode: this.travelMode,
          provideRouteAlternatives: true,
          unitSystem: google.maps.UnitSystem.METRIC
        }, function(response, status) {
          if (status === 'OK') {
            var image1 = {
          url: 'https://cdn.pixabay.com/photo/2012/04/23/16/54/warning-39047_640.png',
          // This marker is 20 pixels wide by 32 pixels high.
           scaledSize: new google.maps.Size(28, 28),
         // size: new google.maps.Size(20, 32),

        };
          var image2 = {
          url: 'https://www.canada.ca/content/dam/hc-sc/migration/hc-sc/cps-spc/images/legislation/acts-lois/hazard-symbol-danger1.jpg',
          // This marker is 20 pixels wide by 32 pixels high.
           scaledSize: new google.maps.Size(28, 28),
         // size: new google.maps.Size(20, 32),

        };
        ;
          var image3 = {
          url: 'https://cdn3.iconfinder.com/data/icons/picons-weather/57/53_warning-256.png',
          // This marker is 20 pixels wide by 32 pixels high.
           scaledSize: new google.maps.Size(23, 23),
         // size: new google.maps.Size(20, 32),

        };
        var image4 = {
          url: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/SNice.svg/220px-SNice.svg.png',
          // This marker is 20 pixels wide by 32 pixels high.
           scaledSize: new google.maps.Size(23, 23),
         // size: new google.maps.Size(20, 32),

        };
        var image5 = {
          url: 'https://static9.depositphotos.com/1431107/1143/i/950/depositphotos_11437164-stock-photo-green-tick.jpg',
          // This marker is 20 pixels wide by 32 pixels high.
           scaledSize: new google.maps.Size(23, 23),
         // size: new google.maps.Size(20, 32),

        };
          var color=["purple","yellow","green","blue","pink"];
            //me.directionsDisplay.setDirections(response);
           console.log(response.routes.length);
           var dindex=[];
          var len = response.routes.length
             for (var k = 0 ; k < len; k++) {
              dindex[k]=0;
              var points = response.routes[k].overview_path;
              //console.log("yayyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy");
              //console.log(points.length);

               new google.maps.DirectionsRenderer({
                    map: map,
                    directions: response,
                    routeIndex: k,
                     unitSystem: google.maps.UnitSystem.METRIC,
                    provideRouteAlternatives: true,
                      polylineOptions: {
                    strokeColor: color[k],
                    strokeOpacity: 0.7,
                    strokeWeight: 10

                }

                });
               //console.log(points);
               //console.log(data);
               function toggleBounce() {
                  if (marker.getAnimation() !== null) {
                    marker.setAnimation(null);
                  } else {
                    marker.setAnimation(google.maps.Animation.BOUNCE);
                  }
}
               var  infoWindow = new google.maps.InfoWindow;
               var posInit;
                        var count = 0;
             for (var j = 0; j < points.length; j++) {
                      for (var i = 0; i < data.length; i++) {

                        var st1 = data[i].lati.toString();
                        st1=st1.slice(0,(st1.indexOf("."))+3);
                        var st3 = data[i].longi.toString();
                        st3=st3.slice(0,(st3.indexOf("."))+3);
                        var st2 = points[j].lng().toString();
                        st2=st2.slice(0,(st2.indexOf("."))+3);
                        var st4 = points[j].lat().toString();
                        st4=st4.slice(0,(st4.indexOf("."))+3);

                         if ((st1 === st2) && (st3 === st4))
                          {
                            count++;
                              posInit = new google.maps.LatLng(data[i].longi,data[i].lati);

                               if(data[i].properties.mag==4){
         var marker = new google.maps.Marker({
          position: new google.maps.LatLng(data[i].longi,data[i].lati),
          icon:image1,
          title:"EXTREMELY DANGEROUS",
          map: map
        });
dindex[k]+=4;
         }
         else if(data[i].properties.mag==3){
         var marker = new google.maps.Marker({
          position: new google.maps.LatLng(data[i].longi,data[i].lati),
          icon:image2,
          title:"MODERATELY DANGEROUS",
          map: map
        }); dindex[k]+=3;}
       else if(data[i].properties.mag==2){
         var marker = new google.maps.Marker({
          position: new google.maps.LatLng(data[i].longi,data[i].lati),
          icon:image3,
          draggable: true,
          title:"BE CAREFUL",
          Animation:google.maps.Animation.DROP,
          map: map
        }); dindex[k]+=2;
        marker.addListener("click", toggleBounce);

      }
      
        else if(data[i].properties.mag==1){
         var marker = new google.maps.Marker({
          position: new google.maps.LatLng(data[i].longi,data[i].lati),
          icon:image4,
          title:"MODERATELY SAFE",
          map: map
        }); dindex[k]+=1;
        marker.addListener("click", toggleBounce);
      
      }
        else if(data[i].properties.mag==0){
         var marker = new google.maps.Marker({
          position: new google.maps.LatLng(data[i].longi,data[i].lati),
          icon:image5,
          title:"SAFEST",
          map: map
        }); }

                  }
                  }

                }

 dindex[k]/=count;
 var div = document.createElement('div');
 div.className = "my";
 document.body.appendChild(div);
 var colour = "color"+k,
 	 duration = "duration"+k,
 	 distance = "distance"+k,
   start_address = "start_address"+k,
   end_address = "end_address"+k,
 	 safetyi = "safetyi"+k;
  
   var newdiv = document.createElement('div');
  newdiv.className ="check";
  document.body.appendChild(newdiv);

  // newdiv.innerHTML = '<div class="card-body p-5"><h4 class="mb-4">List with bullets</h4><ul class="list-bullets"><li class="mb-2"></li></li><li class="mb-2">Consectetur adipisicing elit.</li><li class="mb-2">Sed do eiusmod tempor incididunt.</li><li class="mb-2">Ut labore et dolore magna aliqua. </li><li class="mb-2">Exercitation ullamco laboris nisi.</li></ul></div></div>';

   
 div.innerHTML = '<div style="box-shadow:2px 2px 3px grey ;border-radius:8px;border:2px solid black;border-spacing:15px;margin-bottom:10px;  <ul class="msg" ><li id='+start_address+'></li><li id='+end_address+'></li><li id='+colour+'></li><li id='+duration+'></li><li id='+distance+'></li><li id='+safetyi+'></li></ul></div>  </div> ';
let safest_path = div.innerHTML;


// let diff_details = document.getElementById("details").innerHTML= start_address;
// console.log(duration)
// diff_details = '<ol><li id='+start_address+'></li></ol>';
 // 
// creating a ranking system where in each obj is compared first with the danger index then the rest 

// for(var i = 0 ;i < response.routes.length;i++){
//     for(var j = i+1 ;j<response.routes.length;i++){
//       if(safetyi[i] < safetyi[j]  ){
//         console.log("the route" + safetyi[i] + "is safe")
//       }
// //       else{
// //           if(response.routes[i].legs[0].distance.text < response.routes[i].legs[0].distance.text){
// //                 console.log(response.routes[i].legs[0].distance.text + " is the safest and fastest route")
// //           }
// //       }

//     }
// // //       // console.log(response.routes[i].legs)
// }

  document.getElementById(colour).innerHTML = "Route Number:  " + k + " is colored " +
      (color[k]) ;
   document.getElementById(distance).innerHTML = "Distance  : " +
      (response.routes[k].legs[0].distance.text) ;

      document.getElementById(start_address).innerHTML = "Start Address [ A ] : " +
      (response.routes[k].legs[0].start_address) ;
    
      document.getElementById(end_address).innerHTML = "End Address [ B ]: " +
      (response.routes[k].legs[0].end_address) ;
      // console.log(response.routes[k].legs[0].start_address);
    //console.log((response.routes[i].legs[0].distance.value) / 1000 + "killo meters");
    // Display the duration:
    document.getElementById(duration).innerHTML = "Time duration for reaching : " +
      response.routes[k].legs[0].duration.text;
    // console.log(response.routes[k].legs[0]);

  infoWindow.setPosition(posInit);
   var message = 'dangerIndex is :'+dindex[k];
  document.getElementById(safetyi).innerHTML = message;
  var dis='Route :'+k;
  // console.log(message)
  // console.log(dindex.length)
// console.log(dindex[k])
var arr = []
arr.push(dindex[k])
// console.log(arr.sort())

// console.log(sorted_dindex[0])
// for(var i =0 ;i<=1 ;i++){
  
//   sorted_dindex =dindex.sort(function(a, b){return a-b});
//     console.log(sorted_dindex[0] + "is the safest path")
//     break;
// }
//  ------------------
// console.log(response.routes[k].legs[0].duration.text[0])
  for(var i =0 ;i<dindex.length ;i++){
    for(var j =i+1 ; j<dindex.length ;j++){
      var res;
      var myroutes = response.routes[k].legs[0].duration.text;
      var mydistance = response.routes[k].legs[0].distance.text;
        if(dindex[i]<dindex[j]){
          res = dindex[i];
          // div.style.backgroundColor ="green";
          // document.getElementsByClassName("my").style.color ="green";
          // safest_path.style.color = "green";
          // console.log(dindex[i]+" is the safest\n")
          // var result = dindex[i];
        }else{
          // dindex[i] = res;
          res = dindex[j];
          // document.getElementsByClassName("my").style.color ="green";
          // div.style.backgroundColor ="green";
          // console.log(dindex[j]+" is the safest\n")
        }
        if(dindex[i] ==  dindex[j]){
          if(myroutes[i] < myroutes[j]){
              // console.log(myroutes[i])
              var shortest_duration = myroutes[i];
          }else{
            // console.log(myroutes[j])
             shortest_duration = myroutes[j];
          }
        }
        if(myroutes[i] == myroutes[j]){
          var shortest_distance = mydistance[i];
        }else{
          shortest_distance = mydistance[j];
        }
        // if(dindex[i] == res){
        //   div.style.backgroundColor ="green";

        // }else if(dindex[j] == res){
        //   div.style.backgroundColor ="green";

        // }

        // else if(dindex[i] == dindex[j]){
          //     for(var p = 0 ; p < response.routes.length;p++){
            //       for(var l = p+1 ; l < response.routes.length ; p++){
              //             // if(response.routes[k].legs[0].)
              //       }
              //     }
              // }
            }
          }
          // document.write(result+" is the safest\n")
          //infoWindow.setContent(dis);
          //       infoWindow.open(map);
          
          // break;
        }
        //  console.log(dindex);
        console.log()
        console.log("safest path: " + res)
        // document.write(res)
        document.getElementById("myres").innerHTML = '<div style="text-align:center;font-weight:bold;border:2px solid black;margin:10px;" > <p>The most optimal and safest path is with danger Index:</p>' +res+ '</div>'
var res_html = document.createElement('div');
// var show_banner = document.createElement('div');
// res_html.className = "result"

document.getElementById("banner").innerHTML = '<bold>Choose the path with the least danger index for a safe travel!</bold>'

//--------------------------------------------------------//

// creating a machine learning model using brain.js
const net = new brain.NeuralNetwork();


var maxval = 0;
for( var i = 0 ; i < data.length ; i++){
    if(data[i].longi > maxval){
        maxval = data[i].longi;
    }
}
// console.log("the max value is : " ,maxval)

var propertiesMagMax = 4;
var latiMax = 77.3327;
var longiMax = 28.8532;
for(var i = 0 ;i < data.length ; i++){
    data[i].lati = data[i].lati / latiMax;
    data[i].long = data[i].longi / longiMax;
    data[i].properties.mag = data[i].properties.mag / propertiesMagMax;
}
// // console.log(data[20].lati)
const training_data = data.map(item =>({
    input : [item.lati , item.longi],
    output : [item.properties.mag]
}));

net.train(
    training_data , {
        iterations:10000
    }
)

let Predictedresult = net.run([data[54].lati , data[54].longi]);
var weight = Math.floor(Math.random() * 5);
console.log("the probability of danger of the route is :" , (res * weight) * 100 +" %");

// ans = document.getElementById("brainTag").innerHTML = "<center><b>The chances of destination being safe: " + (Predictedresult * weight)  + "</center></b>" ;
// ans.style.bl
ans = document.getElementById("brainTag").innerHTML = '<div style="text-align:center;font-weight:bold;border:2px solid black;margin:10px;" > <p>The chances of place being safe:</p>' + (Predictedresult * weight)+ '</div>';

// console.log(Math.floor(Math.random() * 5));
// var neuron = require("neuro.js");
// const neuro = require('../dist/index.umd.js');
// const neuron = require('neuro.umd.js');
// import neuron from 'neuro.js';
// var mywinnow = neuron.classifiers.Winnow.bind(0 , {retrain_count : 10});

// var intentClassifier = new neuron.classifiers.multilabel.BinaryRelevance({
//     binaryClassifierType : mywinnow
// });


// // intentClassifier.trainBatch([
// //     training_data
// // ]);

// // console.dir(

// //     intentClassifier.classify([data[34].lati , data[34].longi])
// // )

// const training_data = data.map(item =>({
//     input : [item.lati , item.longi],
//     output : [item.properties.mag]
// }));

// intentClassifier.trainBatch([
//     training_data
// ]);
  
// console.dir(

//     intentClassifier.classify([data[34].lati , data[34].longi])
// );
//   console.dir(
//     intentClassifier.classify({
//       I: 1,
//       want: 1,
//       an: 1,
//       apple: 1,
//       and: 1,
//       a: 1,
//       banana: 1
//     })
//   ); // ['APPLE','BANANA']

// const brain = require('brain.js');
// var neuron = require('neuro.js');
// import brain from 'brain.js';

//--------------------------------------------------------//

// res.innerHTML = '<div class="result"  + id='+res+' </div>'
// if(res == dindex[k]){
//   div.style.backgroundColor ="green";
if(res == dindex){
  div.style.backgroundColor ="green";

}

// }
var routes = response.routes;
                    for (var j = 0; j < routes.length; j++) {
                        var points = routes[j].overview_path;

                      // console.log(points)
                    }


          } else {
            window.alert('Directions request failed due to ' + status);
          }
        });
      };

      $(document).ready(function(){
        navigator.geolocation.getCurrentPosition(initMap);
      let name = "shadman";

      });
    </script>

  </body>
</html>
